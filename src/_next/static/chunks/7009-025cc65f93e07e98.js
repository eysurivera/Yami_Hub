"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7009],{77147:function(t,e,a){a.d(e,{Am:function(){return x},pm:function(){return s}});var r=a(2265);let n=0,o=new Map,d=t=>{if(o.has(t))return;let e=setTimeout(()=>{o.delete(t),c({type:"REMOVE_TOAST",toastId:t})},1e6);o.set(t,e)},i=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:a}=e;return a?d(a):t.toasts.forEach(t=>{d(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===a||void 0===a?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},u=[],T={toasts:[]};function c(t){T=i(T,t),u.forEach(t=>{t(T)})}function x(t){let{...e}=t,a=(n=(n+1)%Number.MAX_VALUE).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:t=>{t||r()}}}),{id:a,dismiss:r,update:t=>c({type:"UPDATE_TOAST",toast:{...t,id:a}})}}function s(){let[t,e]=r.useState(T);return r.useEffect(()=>(u.push(e),()=>{let t=u.indexOf(e);t>-1&&u.splice(t,1)}),[t]),{...t,toast:x,dismiss:t=>c({type:"DISMISS_TOAST",toastId:t})}}},9706:function(t,e,a){let r=Number("0")||0;e.ZP={project:"icp",setting:[{api_url:"https://example.com/api",imgur:"76b444f991f4a86"},{api_url:"https://example.com/api",imgur:"76b444f991f4a86"}][r],internetIdentityUrl:"https://be2us-64aaa-aaaaa-qaabq-cai.dvcode.tech/",canisterId:"bkyz2-fmaaa-aaaaa-qaaaq-cai"}},87009:function(t,e,a){a.r(e),a.d(e,{RoleEnum:function(){return n},StateContext:function(){return h},StateProvider:function(){return I},useStateContext:function(){return N}});var r,n,o=a(57437),d=a(2265),i=a(81928),u=a(78809);let T=t=>{let{IDL:e}=t;return e.Service({createArticle:e.Func([e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,date:e.Nat64,description:e.Text})],[e.Variant({Ok:e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],[]),createCategory:e.Func([e.Text],[e.Variant({Ok:e.Record({id:e.Text,name:e.Text}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],[]),createUser:e.Func([e.Text],[e.Variant({Ok:e.Record({id:e.Principal,status:e.Bool,name:e.Text,createdAt:e.Nat64,role:e.Text,updatedAt:e.Nat64}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],[]),getActiveArticleById:e.Func([e.Text],[e.Variant({Ok:e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getActiveArticles:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getActiveArticlesByCategory:e.Func([e.Text],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getAllArticles:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getAllCategories:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,name:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getArticlesEditedByEditor:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getArticlesOfAuthor:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getInactiveArticles:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getMe:e.Func([],[e.Variant({Ok:e.Record({id:e.Principal,status:e.Bool,name:e.Text,createdAt:e.Nat64,role:e.Text,updatedAt:e.Nat64}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),getUsers:e.Func([],[e.Variant({Ok:e.Vec(e.Record({id:e.Principal,status:e.Bool,name:e.Text,createdAt:e.Nat64,role:e.Text,updatedAt:e.Nat64})),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],["query"]),initOwner:e.Func([],[e.Variant({Ok:e.Principal,Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],[]),updateArticle:e.Func([e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,date:e.Nat64,description:e.Text})],[e.Variant({Ok:e.Record({id:e.Text,categoryId:e.Text,status:e.Bool,title:e.Text,content:e.Text,authorId:e.Text,date:e.Nat64,createdAt:e.Nat64,authorName:e.Text,description:e.Text,updatedAt:e.Nat64,editorId:e.Text}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],[]),updateUser:e.Func([e.Record({id:e.Principal,status:e.Bool,name:e.Text,role:e.Text})],[e.Variant({Ok:e.Record({id:e.Principal,status:e.Bool,name:e.Text,createdAt:e.Nat64,role:e.Text,updatedAt:e.Nat64}),Err:e.Variant({NotFound:e.Text,Unauthorized:e.Text,InternalError:e.Text,Forbidden:e.Text,BadRequest:e.Text})})],[])})},c="bkyz2-fmaaa-aaaaa-qaaaq-cai",x=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.agent||new u.i7({...e.agentOptions,host:"https://be2us-64aaa-aaaaa-qaabq-cai.dvcode.tech/"});return e.agent&&e.agentOptions,u.vt.createActor(T,{agent:a,canisterId:t,...e.actorOptions})};c&&x(c);var s=a(9706),l=a(77147),p=a(85240);(r=n||(n={})).AUTHOR="author",r.EDITOR="editor",r.ADMIN="admin";let h=(0,d.createContext)({}),N=()=>(0,d.useContext)(h);function I(t){let{children:e}=t,[a,r]=(0,d.useState)(null),[n,T]=(0,d.useState)(null),[c,N]=(0,d.useState)(null),[I,A]=(0,d.useState)(null),[E,g]=(0,d.useState)(!1),[y,f]=(0,d.useState)(!1),[F,q]=(0,d.useState)(!1),[O,V]=(0,p.Z)("updateArticle",null),m=async()=>{n&&await n.initOwner()},R=async()=>{let t=new u.i7({host:"https://be2us-64aaa-aaaaa-qaabq-cai.dvcode.tech/",verifyQuerySignatures:!1});T(x(s.ZP.canisterId,{agent:t}))},S=async()=>{let t=await i.LY.create();await t.login({identityProvider:"https://be2us-64aaa-aaaaa-qaabq-cai.dvcode.tech/",onSuccess:async()=>{let e=t.getIdentity(),a=new u.i7({host:"https://be2us-64aaa-aaaaa-qaabq-cai.dvcode.tech/",identity:e,verifyQuerySignatures:!1}),n=x(s.ZP.canisterId,{agent:a});N(a),T(n),r(e)}})};return(0,d.useEffect)(()=>{null!=a&&(async()=>{if(n){let t=await n.getMe();t.Err&&(console.error("getMe: ",t.Err),A((await n.createUser(a.getPrincipal().toText())).Ok))}})()},[n,a]),(0,d.useEffect)(()=>{a&&(async()=>{var t;g((null==a?void 0:null===(t=a.getPrincipal())||void 0===t?void 0:t.toText())==="gekdn-puzkx-m77h6-qfn7f-ap4hk-fqm3n-ggxvm-lu22i-gbtfh-2idqp-yae");let e=await n.getMe();if(e.Ok){A(e.Ok);let{role:t}=e.Ok;"author"===t?f(!0):"editor"===t?q(!0):(f(!1),q(!1),(0,l.Am)({title:"Unauthorized Access",description:"You are not authorized to access this page.",variant:"destructive"}))}})()},[a]),(0,d.useEffect)(()=>{R()},[]),(0,o.jsx)(h.Provider,{value:[{identity:a,actor:n,agent:c,user:I,isAdmin:E,isEditor:F,isAuthor:y,updateArticle:O},{setIdentity:r,setActor:T,setAgent:N,setUser:A,login:S,setIsAdmin:g,setIsAuthor:f,setIsEditor:q,initOwner:m,toast:l.Am,setUpdateArticle:V}],children:e})}},85240:function(t,e,a){var r=a(2265);e.Z=function(t,e){let[a,n]=(0,r.useState)(()=>{try{let a=window.localStorage.getItem(t);return a?JSON.parse(a):e}catch(t){return e}});return[a,e=>{try{let r=e instanceof Function?e(a):e;n(r),window.localStorage.setItem(t,JSON.stringify(r))}catch(t){}}]}}}]);