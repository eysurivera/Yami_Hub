(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[243],{243:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var i=r(57437),l=r(87009),a=r(54873),n=r(575),s=r(53905),c=r(36815),d=r(22169),o=r(24033);let u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[{id:"id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"ID"})},accessorFn:e=>"".concat(e.id),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"max-w-xs",children:r.id})}},{id:"category_id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Category"})},accessorFn:e=>"".concat(e.categoryId),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"max-w-xs",children:r.categoryId})}},{id:"title",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Title"})},accessorFn:e=>"".concat(e.title),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsxs)("div",{className:"min-w-[16rem]",children:[(0,i.jsx)("div",{className:"font-bold text-gray-800",children:r.title}),(0,i.jsx)("div",{className:"text-gray-500 max-w-md line-clamp-2",children:r.description})]})}},{id:"author",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Author"})},accessorFn:e=>"".concat(e.authorName),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-[10rem]",children:r.authorName})}},{id:"author_id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Author ID"})},accessorFn:e=>"".concat(e.authorId),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-[10rem]",children:r.authorId})}},{id:"editor_id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Editor ID"})},accessorFn:e=>"".concat(e.editorId),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-[10rem]",children:r.editorId})}},{id:"status",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Status"})},cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:(0,d.cn)("rounded-full w-2 h-2",r.status?"bg-green-500":"bg-red-500")}),(0,i.jsx)("div",{children:r.status?"True":"False"})]})},accessorFn:e=>"".concat(e.status?"True":"False"),filterFn:(e,t,r)=>r.includes(e.getValue(t))},{id:"created_at",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Created At"})},cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-max",children:new Date(parseInt(r.createdAt)/1e6).toLocaleString("en-US",{timeZone:"Asia/Manila",year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"})})},accessorFn:e=>"".concat(e.createdAt)},{id:"actions",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Actions"})},cell:r=>{let{row:l}=r;return(0,i.jsx)(m,{data:l.original,state:e,fn:t})}}]},m=e=>{let{data:t,state:r,fn:a}=e,[c,d]=(0,l.useStateContext)(),u=(0,o.useRouter)();return(0,i.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,i.jsx)(n.z,{variant:"outline",size:"icon",onClick:()=>{d.setUpdateArticle(t),u.push("/admin/update-article/?id=".concat(t.id))},disabled:!c.user.status,children:(0,i.jsx)(s.Z,{className:"h-4 w-4"})})})};var h=r(24930),g=r.n(h);r(82058),g()(()=>Promise.all([r.e(7335),r.e(4360)]).then(r.t.bind(r,36015,23)).then(e=>e.Editor),{loadableGenerated:{webpack:()=>[36015]},ssr:!1});let x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[{id:"id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"ID"})},accessorFn:e=>"".concat(e.id),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"max-w-xs",children:r.id})}},{id:"category_id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Category"})},accessorFn:e=>"".concat(e.categoryId),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"max-w-xs",children:r.categoryId})}},{id:"title",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Title"})},accessorFn:e=>"".concat(e.title),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsxs)("div",{className:"min-w-[16rem]",children:[(0,i.jsx)("div",{className:"font-bold text-gray-800",children:r.title}),(0,i.jsx)("div",{className:"text-gray-500 max-w-md line-clamp-2",children:r.description})]})}},{id:"author",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Author"})},accessorFn:e=>"".concat(e.authorName),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-[10rem]",children:r.authorName})}},{id:"author_id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Author ID"})},accessorFn:e=>"".concat(e.authorId),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-[10rem]",children:r.authorId})}},{id:"editor_id",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Editor ID"})},accessorFn:e=>"".concat(e.editorId),cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-[10rem]",children:r.editorId})}},{id:"status",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Status"})},cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:(0,d.cn)("rounded-full w-2 h-2",r.status?"bg-green-500":"bg-red-500")}),(0,i.jsx)("div",{children:r.status?"True":"False"})]})},accessorFn:e=>"".concat(e.status?"True":"False"),filterFn:(e,t,r)=>r.includes(e.getValue(t))},{id:"created_at",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Created At"})},cell:e=>{let{row:t}=e,r=t.original;return(0,i.jsx)("div",{className:"min-w-max",children:new Date(parseInt(r.createdAt)/1e6).toLocaleString("en-US",{timeZone:"Asia/Manila",year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"})})},accessorFn:e=>"".concat(e.createdAt)},{id:"actions",header:e=>{let{column:t}=e;return(0,i.jsx)(c.p,{column:t,title:"Actions"})},cell:r=>{let{row:l}=r;return(0,i.jsx)(v,{data:l.original,state:e,fn:t})}}]},v=e=>{let{data:t,state:r,fn:a}=e,[c,d]=(0,l.useStateContext)(),u=(0,o.useRouter)();return(0,i.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,i.jsx)(n.z,{variant:"outline",size:"icon",onClick:()=>{d.setUpdateArticle(t),u.push("/admin/update-article/?id=".concat(t.id))},disabled:!c.user.status,children:(0,i.jsx)(s.Z,{className:"h-4 w-4"})})})};var j=r(3216),p=r(7660),w=r(5887),y=r(33808),b=r(2265),f=r(73879);function N(e){var t;let{columns:r,data:l,metadata:a=null}=e,[n,s]=(0,b.useState)([]),[c,d]=(0,b.useState)([]),[o,u]=(0,b.useState)({}),m=(0,j.b7)({data:l,columns:r,getCoreRowModel:(0,p.sC)(),getPaginationRowModel:(0,p.G_)(),onSortingChange:s,getSortedRowModel:(0,p.tj)(),onColumnFiltersChange:d,getFilteredRowModel:(0,p.vL)(),onColumnVisibilityChange:u,getFacetedUniqueValues:(0,p.JG)(),state:{sorting:n,columnFilters:c,columnVisibility:o}});return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(f.n,{id:"categories",table:m}),(0,i.jsx)("div",{className:"rounded-md border",children:(0,i.jsxs)(w.iA,{children:[(0,i.jsx)(w.xD,{children:m.getHeaderGroups().map(e=>(0,i.jsx)(w.SC,{children:e.headers.map(e=>(0,i.jsx)(w.ss,{children:e.isPlaceholder?null:(0,j.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,i.jsx)(w.RM,{children:(null===(t=m.getRowModel().rows)||void 0===t?void 0:t.length)?m.getRowModel().rows.map(e=>(0,i.jsx)(w.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,i.jsx)(w.pj,{children:(0,j.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,i.jsx)(w.SC,{children:(0,i.jsx)(w.pj,{colSpan:r.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,i.jsx)(y.k,{table:m})]})}function A(e){var t;let{columns:r,data:l,metadata:a=null}=e,[n,s]=(0,b.useState)([]),[c,d]=(0,b.useState)([]),[o,u]=(0,b.useState)({}),m=(0,j.b7)({data:l,columns:r,getCoreRowModel:(0,p.sC)(),getPaginationRowModel:(0,p.G_)(),onSortingChange:s,getSortedRowModel:(0,p.tj)(),onColumnFiltersChange:d,getFilteredRowModel:(0,p.vL)(),onColumnVisibilityChange:u,getFacetedUniqueValues:(0,p.JG)(),state:{sorting:n,columnFilters:c,columnVisibility:o}});return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(f.n,{id:"categories",table:m}),(0,i.jsx)("div",{className:"rounded-md border",children:(0,i.jsxs)(w.iA,{children:[(0,i.jsx)(w.xD,{children:m.getHeaderGroups().map(e=>(0,i.jsx)(w.SC,{children:e.headers.map(e=>(0,i.jsx)(w.ss,{children:e.isPlaceholder?null:(0,j.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,i.jsx)(w.RM,{children:(null===(t=m.getRowModel().rows)||void 0===t?void 0:t.length)?m.getRowModel().rows.map(e=>(0,i.jsx)(w.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,i.jsx)(w.pj,{children:(0,j.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,i.jsx)(w.SC,{children:(0,i.jsx)(w.pj,{colSpan:r.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,i.jsx)(y.k,{table:m})]})}var C=r(81350);function I(){let[e,t]=(0,l.useStateContext)(),[r,n]=(0,C.Z)();return(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-icp-yellow font-semibold text-[16px] pb-4",children:"Editor"}),(0,i.jsxs)("div",{className:"md:flex",children:[(0,i.jsxs)("ul",{className:"flex-column space-y space-y-4 text-sm font-medium text-gray-500 dark:text-gray-400 md:me-4 mb-4 md:mb-0",children:[(0,i.jsx)("li",{children:(0,i.jsxs)("button",{className:r.currentTab===C.V.INACTIVE?"inline-flex items-center px-4 py-3 text-white bg-blue-700 rounded-lg active w-full dark:bg-blue-600":"inline-flex items-center px-4 py-3 rounded-lg hover:text-gray-900 bg-gray-50 hover:bg-gray-100 w-full dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>n.setCurrentTab(C.V.INACTIVE),children:[(0,i.jsx)(a.jYN,{className:"w-4 h-4 me-2 text-gray-500 dark:text-gray-400"}),(0,i.jsx)("div",{className:"min-w-max",children:"Inactive Articles"})]})}),(0,i.jsx)("li",{children:(0,i.jsxs)("button",{className:r.currentTab===C.V.MY_EDITED?"inline-flex items-center px-4 py-3 text-white bg-blue-700 rounded-lg active w-full dark:bg-blue-600":"inline-flex items-center px-4 py-3 rounded-lg hover:text-gray-900 bg-gray-50 hover:bg-gray-100 w-full dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>n.setCurrentTab(C.V.MY_EDITED),children:[(0,i.jsx)(a.jYN,{className:"w-4 h-4 me-2 text-gray-500 dark:text-gray-400"}),(0,i.jsx)("div",{className:"min-w-max",children:"My Edited Articles"})]})})]}),r.currentTab===C.V.INACTIVE&&(0,i.jsxs)("div",{className:"overflow-hidden p-6 bg-gray-50 text-medium text-gray-500 dark:text-gray-400 dark:bg-gray-800 rounded-lg w-full",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"My Articles"}),(0,i.jsx)(N,{columns:u(r,n),data:r.contents.inactiveArticles})]}),r.currentTab===C.V.MY_EDITED&&(0,i.jsxs)("div",{className:"overflow-hidden p-6 bg-gray-50 text-medium text-gray-500 dark:text-gray-400 dark:bg-gray-800 rounded-lg w-full",children:[(0,i.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"My Articles"}),(0,i.jsx)(A,{columns:x(r,n),data:r.contents.myEditedArticles})]})]})]})}},81350:function(e,t,r){"use strict";r.d(t,{V:function(){return l},Z:function(){return d}});var i,l,a=r(2265),n=r(87009),s=r(77147),c=r(85240);function d(){let[e,t]=(0,n.useStateContext)(),[r,i]=(0,c.Z)("editorTab","inactive-articles"),[l,d]=(0,a.useState)({inactiveArticles:[],myEditedArticles:[],categories:[]}),o=async t=>{try{switch(t){case"inactive-articles":{let t=await e.actor.getInactiveArticles();d(e=>({...e,inactiveArticles:t.Ok||[]}));break}case"my-edited-articles":{let t=await e.actor.getArticlesEditedByEditor();d(e=>({...e,myEditedArticles:t.Ok||[]}));break}case"categories":{let t=await e.actor.getAllCategories();d(e=>({...e,categories:t.Ok||[]}))}}}catch(e){console.error("Error while fetching ".concat(t,":"),e)}},u=async t=>{let{title:r,date:i,description:l,content:a,categoryId:n}=t;try{await e.actor.createArticle({id:"",title:r,date:i,description:l,content:a,categoryId:n,status:!1}),await o("inactive-articles"),(0,s.Am)({title:"Article created",description:"Article created successfully",duration:5e3})}catch(t){var c,d;let e=(null==t?void 0:null===(d=t.response)||void 0===d?void 0:null===(c=d.data)||void 0===c?void 0:c.message)||t.message;console.error("createArticle: ",e),(0,s.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:e})}},m=async t=>{let{id:r,title:i,date:l,description:a,content:n,categoryId:c,status:d}=t;try{let t=await e.actor.updateArticle({id:r,title:i,date:l,description:a,content:n,categoryId:c,status:d});if(await o("inactive-articles"),t.Err){(0,s.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:t.Err.Forbidden});return}(0,s.Am)({title:"Article updated",description:"Article updated successfully",duration:5e3})}catch(t){var u,m;let e=(null==t?void 0:null===(m=t.response)||void 0===m?void 0:null===(u=m.data)||void 0===u?void 0:u.message)||t.message;console.error("updateArticle: ",e),(0,s.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:e})}},h=async t=>{let{id:r,title:i,date:l,description:a,content:n,categoryId:c,status:d}=t;try{let t=await e.actor.updateArticle({id:r,title:i,date:l,description:a,content:n,categoryId:c,status:d});if(await o("my-edited-articles"),t.Err){(0,s.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:t.Err.Forbidden});return}(0,s.Am)({title:"Article updated",description:"Article updated successfully",duration:5e3})}catch(t){var u,m;let e=(null==t?void 0:null===(m=t.response)||void 0===m?void 0:null===(u=m.data)||void 0===u?void 0:u.message)||t.message;console.error("updateEditedArticle: ",e),(0,s.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:e})}};return(0,a.useEffect)(()=>{e.isEditor&&("inactive-articles"===r&&o("categories"),o(r))},[r,e.isEditor]),[{currentTab:r,contents:l},{setCurrentTab:i,getData:o,createArticle:u,updateArticle:m,updateEditedArticle:h}]}(i=l||(l={})).INACTIVE="inactive-articles",i.MY_EDITED="my-edited-articles",i.CATEGORIES="categories"},82058:function(){}}]);