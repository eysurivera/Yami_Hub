(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7093],{47160:function(t,e,r){var o;t=r.nmd(t),self,t.exports=(o=r(2265),(()=>{var n={703:(t,e,r)=>{"use strict";var o=r(414);function n(){}function i(){}i.resetWarningCache=n,t.exports=function(){function t(t,e,r,n,i,s){if(s!==o){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i,resetWarningCache:n};return r.PropTypes=r,r}},697:(t,e,r)=>{t.exports=r(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},787:t=>{"use strict";t.exports=o}},i={};function s(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={exports:{}};return n[t](r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{"use strict";s.r(a),s.d(a,{CKEditor:()=>e5,CKEditorContext:()=>e1,useMultiRootEditor:()=>e4});var o,n=s(787),i=s.n(n),c=s(697),u=s.n(c);let h=Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));class d{constructor(t){if(this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof t.crashNumberLimit?t.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof t.minimumNonErrorTimePeriod?t.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{let e="error"in t?t.error:t.reason;e instanceof Error&&this._handleError(e,t)},this._listeners={},!this._restart)throw Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}off(t,e){this._listeners[t]=this._listeners[t].filter(t=>t!==e)}_fire(t,...e){for(let r of this._listeners[t]||[])r.apply(this,[null,...e])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});let r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}_shouldRestart(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}function l(t,e=new Set){let r=[t],o=new Set,n=0;for(;r.length>n;){let t=r[n++];if(!o.has(t)&&function(t){let e=Object.prototype.toString.call(t),r=typeof t;return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}(t)&&!e.has(t)){if(o.add(t),Symbol.iterator in t)try{for(let e of t)r.push(e)}catch(t){}else for(let e in t)"defaultValue"!==e&&r.push(t[e])}}return o}function f(t,e,r=new Set){if(t===e&&"object"==typeof t&&null!==t)return!0;let o=l(t,r),n=l(e,r);for(let t of o)if(n.has(t))return!0;return!1}let p=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},g="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;var _="object"==typeof self&&self&&self.Object===Object&&self;let y=g||_||Function("return this")(),b=function(){return y.Date.now()};var m=/\s/;let v=function(t){for(var e=t.length;e--&&m.test(t.charAt(e)););return e};var w=/^\s+/;let E=y.Symbol;var j=Object.prototype,O=j.hasOwnProperty,x=j.toString,C=E?E.toStringTag:void 0;let R=function(t){var e=O.call(t,C),r=t[C];try{t[C]=void 0;var o=!0}catch(t){}var n=x.call(t);return o&&(e?t[C]=r:delete t[C]),n};var A=Object.prototype.toString,S=E?E.toStringTag:void 0;let P=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":S&&S in Object(t)?R(t):A.call(t)},D=function(t){return null!=t&&"object"==typeof t};var T=/^[-+]0x[0-9a-f]+$/i,N=/^0b[01]+$/i,I=/^0o[0-7]+$/i,W=parseInt;let k=function(t){if("number"==typeof t)return t;if("symbol"==typeof(e=t)||D(e)&&"[object Symbol]"==P(e))return NaN;if(p(t)){var e,r,o="function"==typeof t.valueOf?t.valueOf():t;t=p(o)?o+"":o}if("string"!=typeof t)return 0===t?t:+t;t=(r=t)?r.slice(0,v(r)+1).replace(w,""):r;var n=N.test(t);return n||I.test(t)?W(t.slice(2),n?2:8):T.test(t)?NaN:+t};var z=Math.max,U=Math.min;let M=function(t,e,r){var o,n,i,s,a,c,u=0,h=!1,d=!1,l=!0;if("function"!=typeof t)throw TypeError("Expected a function");function f(e){var r=o,i=n;return o=n=void 0,u=e,s=t.apply(i,r)}function g(t){var r=t-c;return void 0===c||r>=e||r<0||d&&t-u>=i}function _(){var t,r=b();if(g(r))return y(r);a=setTimeout(_,(t=e-(r-c),d?U(t,i-(r-u)):t))}function y(t){return a=void 0,l&&o?f(t):(o=n=void 0,s)}function m(){var t,r=b(),i=g(r);if(o=arguments,n=this,c=r,i){if(void 0===a)return u=t=c,a=setTimeout(_,e),h?f(t):s;if(d)return clearTimeout(a),a=setTimeout(_,e),f(c)}return void 0===a&&(a=setTimeout(_,e)),s}return e=k(e)||0,p(r)&&(h=!!r.leading,i=(d="maxWait"in r)?z(k(r.maxWait)||0,e):i,l="trailing"in r?!!r.trailing:l),m.cancel=function(){void 0!==a&&clearTimeout(a),u=0,o=c=n=a=void 0},m.flush=function(){return void 0===a?s:y(b())},m},L=function(t,e,r){var o=!0,n=!0;if("function"!=typeof t)throw TypeError("Expected a function");return p(r)&&(o="leading"in r?!!r.leading:o,n="trailing"in r?!!r.trailing:n),M(t,e,{leading:o,maxWait:e,trailing:n})},F=function(t,e){return function(r){return t(e(r))}},q=F(Object.getPrototypeOf,Object);var J=Object.prototype,$=Function.prototype.toString,B=J.hasOwnProperty,H=$.call(Object);let K=function(t){if(!D(t)||"[object Object]"!=P(t))return!1;var e=q(t);if(null===e)return!0;var r=B.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&$.call(r)==H},V=function(t){return D(t)&&1===t.nodeType&&!K(t)},Q=function(t,e){return t===e||t!=t&&e!=e},G=function(t,e){for(var r=t.length;r--;)if(Q(t[r][0],e))return r;return -1};var Y=Array.prototype.splice;function X(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}X.prototype.clear=function(){this.__data__=[],this.size=0},X.prototype.delete=function(t){var e=this.__data__,r=G(e,t);return!(r<0)&&(r==e.length-1?e.pop():Y.call(e,r,1),--this.size,!0)},X.prototype.get=function(t){var e=this.__data__,r=G(e,t);return r<0?void 0:e[r][1]},X.prototype.has=function(t){return G(this.__data__,t)>-1},X.prototype.set=function(t,e){var r=this.__data__,o=G(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this};let Z=function(t){if(!p(t))return!1;var e=P(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},tt=y["__core-js_shared__"];var te=(o=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"",tr=Function.prototype.toString;let to=function(t){if(null!=t){try{return tr.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var tn=/^\[object .+?Constructor\]$/,ti=Object.prototype,ts=Function.prototype.toString,ta=ti.hasOwnProperty,tc=RegExp("^"+ts.call(ta).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");let tu=function(t,e){var r=null==t?void 0:t[e];return!(!p(r)||te&&te in r)&&(Z(r)?tc:tn).test(to(r))?r:void 0},th=tu(y,"Map"),td=tu(Object,"create");var tl=Object.prototype.hasOwnProperty,tf=Object.prototype.hasOwnProperty;function tp(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}tp.prototype.clear=function(){this.__data__=td?td(null):{},this.size=0},tp.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},tp.prototype.get=function(t){var e=this.__data__;if(td){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return tl.call(e,t)?e[t]:void 0},tp.prototype.has=function(t){var e=this.__data__;return td?void 0!==e[t]:tf.call(e,t)},tp.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=td&&void 0===e?"__lodash_hash_undefined__":e,this};let tg=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},t_=function(t,e){var r=t.__data__;return tg(e)?r["string"==typeof e?"string":"hash"]:r.map};function ty(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function tb(t){var e=this.__data__=new X(t);this.size=e.size}ty.prototype.clear=function(){this.size=0,this.__data__={hash:new tp,map:new(th||X),string:new tp}},ty.prototype.delete=function(t){var e=t_(this,t).delete(t);return this.size-=e?1:0,e},ty.prototype.get=function(t){return t_(this,t).get(t)},ty.prototype.has=function(t){return t_(this,t).has(t)},ty.prototype.set=function(t,e){var r=t_(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this},tb.prototype.clear=function(){this.__data__=new X,this.size=0},tb.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},tb.prototype.get=function(t){return this.__data__.get(t)},tb.prototype.has=function(t){return this.__data__.has(t)},tb.prototype.set=function(t,e){var r=this.__data__;if(r instanceof X){var o=r.__data__;if(!th||o.length<199)return o.push([t,e]),this.size=++r.size,this;r=this.__data__=new ty(o)}return r.set(t,e),this.size=r.size,this};let tm=function(t,e){for(var r=-1,o=null==t?0:t.length;++r<o&&!1!==e(t[r],r,t););return t},tv=function(){try{var t=tu(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),tw=function(t,e,r){"__proto__"==e&&tv?tv(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var tE=Object.prototype.hasOwnProperty;let tj=function(t,e,r){var o=t[e];tE.call(t,e)&&Q(o,r)&&(void 0!==r||e in t)||tw(t,e,r)},tO=function(t,e,r,o){var n=!r;r||(r={});for(var i=-1,s=e.length;++i<s;){var a=e[i],c=o?o(r[a],t[a],a,r,t):void 0;void 0===c&&(c=t[a]),n?tw(r,a,c):tj(r,a,c)}return r},tx=function(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o},tC=function(t){return D(t)&&"[object Arguments]"==P(t)};var tR=Object.prototype,tA=tR.hasOwnProperty,tS=tR.propertyIsEnumerable;let tP=tC(function(){return arguments}())?tC:function(t){return D(t)&&tA.call(t,"callee")&&!tS.call(t,"callee")},tD=Array.isArray;var tT=e&&!e.nodeType&&e,tN=tT&&t&&!t.nodeType&&t,tI=tN&&tN.exports===tT?y.Buffer:void 0;let tW=(tI?tI.isBuffer:void 0)||function(){return!1};var tk=/^(?:0|[1-9]\d*)$/;let tz=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&tk.test(t))&&t>-1&&t%1==0&&t<e},tU=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var tM={};tM["[object Float32Array]"]=tM["[object Float64Array]"]=tM["[object Int8Array]"]=tM["[object Int16Array]"]=tM["[object Int32Array]"]=tM["[object Uint8Array]"]=tM["[object Uint8ClampedArray]"]=tM["[object Uint16Array]"]=tM["[object Uint32Array]"]=!0,tM["[object Arguments]"]=tM["[object Array]"]=tM["[object ArrayBuffer]"]=tM["[object Boolean]"]=tM["[object DataView]"]=tM["[object Date]"]=tM["[object Error]"]=tM["[object Function]"]=tM["[object Map]"]=tM["[object Number]"]=tM["[object Object]"]=tM["[object RegExp]"]=tM["[object Set]"]=tM["[object String]"]=tM["[object WeakMap]"]=!1;let tL=function(t){return function(e){return t(e)}};var tF=e&&!e.nodeType&&e,tq=tF&&t&&!t.nodeType&&t,tJ=tq&&tq.exports===tF&&g.process;let t$=function(){try{return tq&&tq.require&&tq.require("util").types||tJ&&tJ.binding&&tJ.binding("util")}catch(t){}}();var tB=t$&&t$.isTypedArray;let tH=tB?tL(tB):function(t){return D(t)&&tU(t.length)&&!!tM[P(t)]};var tK=Object.prototype.hasOwnProperty;let tV=function(t,e){var r=tD(t),o=!r&&tP(t),n=!r&&!o&&tW(t),i=!r&&!o&&!n&&tH(t),s=r||o||n||i,a=s?tx(t.length,String):[],c=a.length;for(var u in t)!e&&!tK.call(t,u)||s&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||tz(u,c))||a.push(u);return a};var tQ=Object.prototype;let tG=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tQ)},tY=F(Object.keys,Object);var tX=Object.prototype.hasOwnProperty;let tZ=function(t){if(!tG(t))return tY(t);var e=[];for(var r in Object(t))tX.call(t,r)&&"constructor"!=r&&e.push(r);return e},t0=function(t){return null!=t&&tU(t.length)&&!Z(t)},t1=function(t){return t0(t)?tV(t):tZ(t)},t2=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e};var t5=Object.prototype.hasOwnProperty;let t9=function(t){if(!p(t))return t2(t);var e=tG(t),r=[];for(var o in t)("constructor"!=o||!e&&t5.call(t,o))&&r.push(o);return r},t6=function(t){return t0(t)?tV(t,!0):t9(t)};var t4=e&&!e.nodeType&&e,t7=t4&&t&&!t.nodeType&&t,t3=t7&&t7.exports===t4?y.Buffer:void 0,t8=t3?t3.allocUnsafe:void 0;let et=function(t,e){if(e)return t.slice();var r=t.length,o=t8?t8(r):new t.constructor(r);return t.copy(o),o},ee=function(t,e){var r=-1,o=t.length;for(e||(e=Array(o));++r<o;)e[r]=t[r];return e},er=function(t,e){for(var r=-1,o=null==t?0:t.length,n=0,i=[];++r<o;){var s=t[r];e(s,r,t)&&(i[n++]=s)}return i},eo=function(){return[]};var en=Object.prototype.propertyIsEnumerable,ei=Object.getOwnPropertySymbols;let es=ei?function(t){return null==t?[]:er(ei(t=Object(t)),function(e){return en.call(t,e)})}:eo,ea=function(t,e){for(var r=-1,o=e.length,n=t.length;++r<o;)t[n+r]=e[r];return t},ec=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)ea(e,es(t)),t=q(t);return e}:eo,eu=function(t,e,r){var o=e(t);return tD(t)?o:ea(o,r(t))},eh=tu(y,"DataView"),ed=tu(y,"Promise"),el=tu(y,"Set"),ef=tu(y,"WeakMap");var ep="[object Map]",eg="[object Promise]",e_="[object Set]",ey="[object WeakMap]",eb="[object DataView]",em=to(eh),ev=to(th),ew=to(ed),eE=to(el),ej=to(ef),eO=P;(eh&&eO(new eh(new ArrayBuffer(1)))!=eb||th&&eO(new th)!=ep||ed&&eO(ed.resolve())!=eg||el&&eO(new el)!=e_||ef&&eO(new ef)!=ey)&&(eO=function(t){var e=P(t),r="[object Object]"==e?t.constructor:void 0,o=r?to(r):"";if(o)switch(o){case em:return eb;case ev:return ep;case ew:return eg;case eE:return e_;case ej:return ey}return e});let ex=eO;var eC=Object.prototype.hasOwnProperty;let eR=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&eC.call(t,"index")&&(r.index=t.index,r.input=t.input),r},eA=y.Uint8Array,eS=function(t){var e=new t.constructor(t.byteLength);return new eA(e).set(new eA(t)),e},eP=function(t,e){var r=e?eS(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)};var eD=/\w*$/;let eT=function(t){var e=new t.constructor(t.source,eD.exec(t));return e.lastIndex=t.lastIndex,e};var eN=E?E.prototype:void 0,eI=eN?eN.valueOf:void 0;let eW=function(t,e){var r=e?eS(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},ek=function(t,e,r){var o=t.constructor;switch(e){case"[object ArrayBuffer]":return eS(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return eP(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return eW(t,r);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return eT(t);case"[object Symbol]":return eI?Object(eI.call(t)):{}}};var ez=Object.create;let eU=function(){function t(){}return function(e){if(!p(e))return{};if(ez)return ez(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var eM=t$&&t$.isMap;let eL=eM?tL(eM):function(t){return D(t)&&"[object Map]"==ex(t)};var eF=t$&&t$.isSet;let eq=eF?tL(eF):function(t){return D(t)&&"[object Set]"==ex(t)};var eJ="[object Arguments]",e$="[object Function]",eB="[object Object]",eH={};eH[eJ]=eH["[object Array]"]=eH["[object ArrayBuffer]"]=eH["[object DataView]"]=eH["[object Boolean]"]=eH["[object Date]"]=eH["[object Float32Array]"]=eH["[object Float64Array]"]=eH["[object Int8Array]"]=eH["[object Int16Array]"]=eH["[object Int32Array]"]=eH["[object Map]"]=eH["[object Number]"]=eH[eB]=eH["[object RegExp]"]=eH["[object Set]"]=eH["[object String]"]=eH["[object Symbol]"]=eH["[object Uint8Array]"]=eH["[object Uint8ClampedArray]"]=eH["[object Uint16Array]"]=eH["[object Uint32Array]"]=!0,eH["[object Error]"]=eH[e$]=eH["[object WeakMap]"]=!1;let eK=function t(e,r,o,n,i,s){var a,c=1&r,u=2&r,h=4&r;if(o&&(a=i?o(e,n,i,s):o(e)),void 0!==a)return a;if(!p(e))return e;var d=tD(e);if(d){if(a=eR(e),!c)return ee(e,a)}else{var l,f,g,_,y=ex(e),b=y==e$||"[object GeneratorFunction]"==y;if(tW(e))return et(e,c);if(y==eB||y==eJ||b&&!i){if(a=u||b?{}:"function"!=typeof e.constructor||tG(e)?{}:eU(q(e)),!c)return u?(f=(l=a)&&tO(e,t6(e),l),tO(e,ec(e),f)):(_=(g=a)&&tO(e,t1(e),g),tO(e,es(e),_))}else{if(!eH[y])return i?e:{};a=ek(e,y,c)}}s||(s=new tb);var m=s.get(e);if(m)return m;s.set(e,a),eq(e)?e.forEach(function(n){a.add(t(n,r,o,n,e,s))}):eL(e)&&e.forEach(function(n,i){a.set(i,t(n,r,o,i,e,s))});var v=d?void 0:(h?u?function(t){return eu(t,t6,ec)}:function(t){return eu(t,t1,es)}:u?t6:t1)(e);return tm(v||e,function(n,i){v&&(n=e[i=n]),tj(a,i,t(n,r,o,i,e,s))}),a};class eV extends d{constructor(t,e={}){super(e),this._editor=null,this._initUsingData=!0,this._editables={},this._throttledSave=L(this._save.bind(this),"number"==typeof e.saveInterval?e.saveInterval:5e3),t&&(this._creator=(e,r)=>t.create(e,r)),this._destructor=t=>t.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(t=>{console.error("An error happened during the editor destroying.",t)}).then(()=>{let t={},e=[],r=this._config.rootsAttributes||{},o={};for(let[n,i]of Object.entries(this._data.roots))i.isLoaded?(t[n]="",o[n]=r[n]||{}):e.push(n);let n={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:e,rootsAttributes:o,_watchdogInitialData:this._data};return delete n.initialData,n.extraPlugins.push(eQ),this._initUsingData?this.create(t,n,n.context):V(this._elementOrData)?this.create(this._elementOrData,n,n.context):this.create(this._editables,n,n.context)}).then(()=>{this._fire("restart")})}create(t=this._elementOrData,e=this._config,r){return Promise.resolve().then(()=>(super._startErrorHandling(),this._elementOrData=t,this._initUsingData="string"==typeof t||Object.keys(t).length>0&&"string"==typeof Object.values(t)[0],this._config=this._cloneEditorConfiguration(e)||{},this._config.context=r,this._creator(t,this._config))).then(t=>{this._editor=t,t.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=t.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")})}destroy(){return Promise.resolve().then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();let t=this._editor;return this._editor=null,t.model.document.off("change:data",this._throttledSave),this._destructor(t)})}_save(){let t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(t){this._excludedProps=t}_getData(){let t=this._editor,e=t.model.document.roots.filter(t=>t.isAttached()&&"$graveyard"!=t.rootName),{plugins:r}=t,o=r.has("CommentsRepository")&&r.get("CommentsRepository"),n=r.has("TrackChanges")&&r.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};for(let r of(e.forEach(t=>{i.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}}),t.model.markers))r._affectsData&&(i.markers[r.name]={rangeJSON:r.getRange().toJSON(),usingOperation:r._managedUsingOperations,affectsData:r._affectsData});return o&&(i.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),n&&(i.suggestions=JSON.stringify(n.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}_getEditables(){let t={};for(let e of this.editor.model.document.getRootNames()){let r=this.editor.ui.getEditableElement(e);r&&(t[e]=r)}return t}_isErrorComingFromThisItem(t){return f(this._editor,t.context,this._excludedProps)}_cloneEditorConfiguration(t){var e;return eK(t,5,e="function"==typeof(e=(t,e)=>V(t)||"context"===e?t:void 0)?e:void 0)}}class eQ{constructor(t){this.editor=t,this._data=t.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",t=>{t.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(t,e){if("name"in e){let r=t.createElement(e.name,e.attributes);if(e.children)for(let o of e.children)r._appendChild(this._createNode(t,o));return r}return t.createText(e.data,e.attributes)}_restoreEditorData(t){let e=this.editor;Object.entries(this._data.roots).forEach(([r,{content:o,attributes:n}])=>{let i=JSON.parse(o),s=JSON.parse(n),a=e.model.document.getRoot(r);for(let[e,r]of s)t.setAttribute(e,r,a);for(let e of i){let r=this._createNode(t,e);t.insert(r,a,"end")}}),Object.entries(this._data.markers).forEach(([r,o])=>{let{document:n}=e.model,{rangeJSON:{start:i,end:s},...a}=o,c=n.getRoot(i.root),u=t.createPositionFromPath(c,i.path,i.stickiness),h=t.createPositionFromPath(c,s.path,s.stickiness),d=t.createRange(u,h);t.addMarker(r,{range:d,...a})})}_restoreCollaborationData(){let t=JSON.parse(this._data.commentThreads),e=JSON.parse(this._data.suggestions);t.forEach(t=>{let e=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(t.threadId)&&r.getCommentThread(t.threadId).remove(),r.addCommentThread({channelId:e,...t})}),e.forEach(t=>{let e=this.editor.plugins.get("TrackChangesEditing");e.hasSuggestion(t.id)?e.getSuggestion(t.id).attributes=t.attributes:e.addSuggestionData(t)})}}let eG=Symbol("MainQueueId");class eY extends d{constructor(t,e={}){super(e),this._watchdogs=new Map,this._context=null,this._contextProps=new Set,this._actionQueues=new eX,this._watchdogConfig=e,this._creator=e=>t.create(e),this._destructor=t=>t.destroy(),this._actionQueues.onEmpty(()=>{"initializing"===this.state&&(this.state="ready",this._fire("stateChange"))})}setCreator(t){this._creator=t}setDestructor(t){this._destructor=t}get context(){return this._context}create(t={}){return this._actionQueues.enqueue(eG,()=>(this._contextConfig=t,this._create()))}getItem(t){return this._getWatchdog(t)._item}getItemState(t){return this._getWatchdog(t).state}add(t){return Promise.all(eZ(t).map(t=>this._actionQueues.enqueue(t.id,()=>{let e;if("destroyed"===this.state)throw Error("Cannot add items to destroyed watchdog.");if(!this._context)throw Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");if(this._watchdogs.has(t.id))throw Error(`Item with the given id is already added: '${t.id}'.`);if("editor"===t.type)return(e=new eV(null,this._watchdogConfig)).setCreator(t.creator),e._setExcludedProperties(this._contextProps),t.destructor&&e.setDestructor(t.destructor),this._watchdogs.set(t.id,e),e.on("error",(r,{error:o,causesRestart:n})=>{this._fire("itemError",{itemId:t.id,error:o}),n&&this._actionQueues.enqueue(t.id,()=>new Promise(r=>{let o=()=>{e.off("restart",o),this._fire("itemRestart",{itemId:t.id}),r()};e.on("restart",o)}))}),e.create(t.sourceElementOrData,t.config,this._context);throw Error(`Not supported item type: '${t.type}'.`)})))}remove(t){return Promise.all(eZ(t).map(t=>this._actionQueues.enqueue(t,()=>{let e=this._getWatchdog(t);return this._watchdogs.delete(t),e.destroy()})))}destroy(){return this._actionQueues.enqueue(eG,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(eG,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(t=>{console.error("An error happened during destroying the context or items.",t)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(t=>(this._context=t,this._contextProps=l(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();let t=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(t))})}_getWatchdog(t){let e=this._watchdogs.get(t);if(!e)throw Error(`Item with the given id was not registered: ${t}.`);return e}_isErrorComingFromThisItem(t){for(let e of this._watchdogs.values())if(e._isErrorComingFromThisItem(t))return!1;return f(this._context,t.context)}}class eX{constructor(){this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}onEmpty(t){this._onEmptyCallbacks.push(t)}enqueue(t,e){let r=t===eG;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());let o=(r?Promise.all(this._queues.values()):Promise.all([this._queues.get(eG),this._queues.get(t)])).then(e),n=o.catch(()=>{});return this._queues.set(t,n),o.finally(()=>{this._activeActions--,this._queues.get(t)===n&&0===this._activeActions&&this._onEmptyCallbacks.forEach(t=>t())})}}function eZ(t){return Array.isArray(t)?t:[t]}let e0=i().createContext("contextWatchdog");class e1 extends i().Component{constructor(t,e){super(t,e),this.contextWatchdog=null,this.props.isLayoutReady&&this._initializeContextWatchdog(this.props.config)}shouldComponentUpdate(t){return this._shouldComponentUpdate(t)}async _shouldComponentUpdate(t){return t.id!==this.props.id&&(this.contextWatchdog&&await this.contextWatchdog.destroy(),await this._initializeContextWatchdog(t.config)),t.isLayoutReady&&!this.contextWatchdog?(await this._initializeContextWatchdog(t.config),!0):this.props.children!==t.children}render(){return i().createElement(e0.Provider,{value:this.contextWatchdog},this.props.children)}componentWillUnmount(){this._destroyContext()}async _initializeContextWatchdog(t){this.contextWatchdog=new eY(this.props.context,this.props.watchdogConfig),this.contextWatchdog.on("error",(t,e)=>{this.props.onError(e.error,{phase:"runtime",willContextRestart:e.causesRestart})}),this.contextWatchdog.on("stateChange",()=>{"ready"===this.contextWatchdog.state&&this.props.onReady&&this.props.onReady(this.contextWatchdog.context)}),await this.contextWatchdog.create(t).catch(t=>{this.props.onError(t,{phase:"initialization",willContextRestart:!1})})}async _destroyContext(){this.contextWatchdog&&(await this.contextWatchdog.destroy(),this.contextWatchdog=null)}}e1.defaultProps={isLayoutReady:!0,onError:(t,e)=>console.error(t,e)},e1.propTypes={id:u().string,isLayoutReady:u().bool,context:u().func,watchdogConfig:u().object,config:u().object,onReady:u().func,onError:u().func};let e2="Lock from React integration (@ckeditor/ckeditor5-react)";class e5 extends i().Component{constructor(t){super(t),this.editorDestructionInProgress=null,this.domContainer=i().createRef(),this.watchdog=null;let{CKEDITOR_VERSION:e}=window;if(e){let[t]=e.split(".").map(Number);t<37&&console.warn("The <CKEditor> component requires using CKEditor 5 in version 37 or higher.")}else console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.')}get editor(){return this.props.disableWatchdog?this.instance:this.watchdog?this.watchdog.editor:null}shouldComponentUpdate(t){return!!this.editor&&(t.id!==this.props.id||t.disableWatchdog!==this.props.disableWatchdog||(this._shouldUpdateEditor(t)&&this.editor.data.set(t.data),"disabled"in t&&(t.disabled?this.editor.enableReadOnlyMode(e2):this.editor.disableReadOnlyMode(e2)),!1))}async componentDidMount(){await this._initializeEditor()}async componentDidUpdate(){await this._destroyEditor(),await this._initializeEditor()}async componentWillUnmount(){await this._destroyEditor()}render(){return i().createElement("div",{ref:this.domContainer})}async _initializeEditor(){await this.editorDestructionInProgress,this.props.disableWatchdog?this.instance=await this._createEditor(this.domContainer.current,this._getConfig()):this.watchdog||(this.context instanceof eY?this.watchdog=new e9(this.context):this.watchdog=new e5._EditorWatchdog(this.props.editor,this.props.watchdogConfig),this.watchdog.setCreator((t,e)=>this._createEditor(t,e)),this.watchdog.on("error",(t,{error:e,causesRestart:r})=>{(this.props.onError||console.error)(e,{phase:"runtime",willEditorRestart:r})}),await this.watchdog.create(this.domContainer.current,this._getConfig()).catch(t=>{(this.props.onError||console.error)(t,{phase:"initialization",willEditorRestart:!1})}))}_createEditor(t,e){return this.props.editor.create(t,e).then(t=>{"disabled"in this.props&&this.props.disabled&&t.enableReadOnlyMode(e2);let e=t.model.document,r=t.editing.view.document;return e.on("change:data",e=>{this.props.onChange&&this.props.onChange(e,t)}),r.on("focus",e=>{this.props.onFocus&&this.props.onFocus(e,t)}),r.on("blur",e=>{this.props.onBlur&&this.props.onBlur(e,t)}),setTimeout(()=>{this.props.onReady&&this.props.onReady(t)}),t})}async _destroyEditor(){this.editorDestructionInProgress=new Promise(t=>{setTimeout(async()=>this.watchdog?(await this.watchdog.destroy(),this.watchdog=null,t()):this.instance?(await this.instance.destroy(),this.instance=null,t()):void t())})}_shouldUpdateEditor(t){return this.props.data!==t.data&&this.editor.data.get()!==t.data}_getConfig(){let t=this.props.config||{};return this.props.data&&t.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...t,initialData:t.initialData||this.props.data||""}}}e5.contextType=e0,e5.propTypes={editor:u().func.isRequired,data:u().string,config:u().object,disableWatchdog:u().bool,watchdogConfig:u().object,onChange:u().func,onReady:u().func,onFocus:u().func,onBlur:u().func,onError:u().func,disabled:u().bool,id:u().any},e5._EditorWatchdog=eV;class e9{constructor(t){this._contextWatchdog=t,this._id=function(){let t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,o=4294967296*Math.random()>>>0;return"e"+h[t>>0&255]+h[t>>8&255]+h[t>>16&255]+h[t>>24&255]+h[e>>0&255]+h[e>>8&255]+h[e>>16&255]+h[e>>24&255]+h[r>>0&255]+h[r>>8&255]+h[r>>16&255]+h[r>>24&255]+h[o>>0&255]+h[o>>8&255]+h[o>>16&255]+h[o>>24&255]}()}setCreator(t){this._creator=t}create(t,e){return this._contextWatchdog.add({sourceElementOrData:t,config:e,creator:this._creator,id:this._id,type:"editor"})}on(t,e){this._contextWatchdog.on("itemError",(t,{itemId:r,error:o})=>{r===this._id&&e(null,{error:o,causesRestart:void 0})})}destroy(){return"ready"===this._contextWatchdog.state?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}let e6="Lock from React integration (@ckeditor/ckeditor5-react)",e4=t=>{let e=null,r=(0,n.useRef)(null),o=(0,n.useContext)(e0),[s,a]=(0,n.useState)(null),[c,u]=(0,n.useState)(t.data),[h,d]=(0,n.useState)(t.rootsAttributes||{}),[l,f]=(0,n.useState)([]),p=(0,n.useRef)(!0),g=(0,n.useRef)(null),_=i().createElement("div",{ref:g});(0,n.useEffect)(()=>((async()=>{await r.current,!1!==t.isLayoutReady&&w()})(),()=>{v().then(()=>{r.current=null})}),[t.isLayoutReady]),(0,n.useEffect)(()=>{s&&(t.disabled?s.enableReadOnlyMode(e6):s.disableReadOnlyMode(e6))},[t.disabled]),(0,n.useEffect)(()=>{let t=g.current;if(s&&!r.current){let e=s.getFullData();u({...e}),d({...s.getRootsAttributes()}),f([...Object.keys(e).map(t=>b(s,t))]),t&&t.appendChild(s.ui.view.toolbar.element)}return()=>{t&&t.firstChild&&t.removeChild(t.firstChild)}},[s&&s.id]);let y=()=>{let e=t.config||{};return t.data&&e.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `data` property. The config value takes precedence over `data` property and will be used when both are specified."),{...e,rootsAttributes:h}},b=(t,e)=>i().createElement("div",{id:e,key:e,ref:r=>{if(r){let o=t.ui.view.createEditable(e,r);t.ui.addEditable(o),t.editing.view.forceRender()}}}),m=(e,r)=>t.editor.create(e,r).then(e=>{t.disabled&&t.disabled&&e.enableReadOnlyMode(e6);let r=e.model.document,o=e.editing.view.document;return r.on("change:data",r=>((e,r)=>{let o=e.model.document,n={},i={};o.differ.getChanges().forEach(t=>{let r;if(!(r="insert"==t.type||"remove"==t.type?t.position.root:t.range.root).isAttached())return;let{rootName:o}=r;n[o]=e.getData({rootName:o})}),o.differ.getChangedRoots().forEach(t=>{if(t.state)return void(void 0!==n[t.name]&&delete n[t.name]);let r=t.name;i[r]=e.getRootAttributes(r)}),Object.keys(n).length&&u(t=>({...t,...n})),Object.keys(i).length&&d(t=>({...t,...i})),t.onChange&&t.onChange(r,e)})(e,r)),e.on("addRoot",(t,r)=>((t,e,r)=>{let o=r.rootName,n=b(t,o);u(e=>({...e,[o]:t.getData({rootName:o})})),d(e=>({...e,[o]:t.getRootAttributes(o)})),f(t=>[...t,n])})(e,0,r)),e.on("detachRoot",(t,r)=>((t,e,r)=>{let o=r.rootName;f(t=>t.filter(t=>t.props.id!==o)),u(t=>{let{[o]:e,...r}=t;return{...r}}),d(t=>{let{[o]:e,...r}=t;return{...r}}),t.detachEditable(r)})(e,0,r)),o.on("focus",r=>{t.onFocus&&t.onFocus(r,e)}),o.on("blur",r=>{t.onBlur&&t.onBlur(r,e)}),a(e),t.onReady&&t.onReady(e),e}),v=async()=>{a(null),u({}),d({}),f([]),r.current=new Promise(t=>{setTimeout(async()=>e?(await e.destroy(),e=null,t()):s?(await s.destroy(),t()):void t())})},w=async()=>{t.disableWatchdog?await m(t.data,y()):e||((e=o instanceof eY?new e9(o):new eV(t.editor,t.watchdogConfig)).setCreator((t,e)=>m(t,e)),e.on("error",(e,{error:r,causesRestart:o})=>{(t.onError||console.error)(r,{phase:"runtime",willEditorRestart:o})}),await e.create(c,y()).catch(e=>{(t.onError||console.error)(e,{phase:"initialization",willEditorRestart:!1})}))};(0,n.useEffect)(()=>{if(s&&p.current){p.current=!1;let t=Object.keys(c),e=Object.keys(h);if(!t.every(t=>e.includes(t)))throw Error("`data` and `attributes` objects must have the same keys (roots).");let r=s.getFullData(),o=s.getRootsAttributes(),{addedKeys:n,removedKeys:i}=E(r,c||{}),a=t.some(t=>void 0!==r[t]&&JSON.stringify(r[t])!==JSON.stringify(c[t])),u=e.filter(t=>JSON.stringify(o[t])!==JSON.stringify(h[t]));s.model.change(t=>{j(n),O(i),a&&x(),u.length&&C(t,u)})}},[c,h]);let E=(t,e)=>{let r=Object.keys(t),o=Object.keys(e);return{addedKeys:o.filter(t=>!r.includes(t)),removedKeys:r.filter(t=>!o.includes(t))}},j=t=>{t.forEach(t=>{s.addRoot(t,{data:c[t]||"",attributes:(null==h?void 0:h[t])||{},isUndoable:!0})})},O=t=>{t.forEach(t=>{s.detachRoot(t,!0)})},x=()=>{s.data.set(c,{suppressErrorInCollaboration:!0})},C=(t,e)=>{e.forEach(e=>{Object.keys(h[e]).forEach(t=>{s.registerRootAttribute(t)}),t.clearAttributes(s.model.document.getRoot(e)),t.setAttributes(h[e],s.model.document.getRoot(e))})};return{editor:s,editableElements:l,toolbarElement:_,data:c,setData:(0,n.useCallback)(t=>{p.current=!0,u(t)},[u]),attributes:h,setAttributes:(0,n.useCallback)(t=>{p.current=!0,d(t)},[d])}}})(),a})())},3039:function(t){class e{constructor(t,e){this.loader=t,this.clientID=e.clientID}upload(){return this.loader.file.then(t=>new Promise((e,r)=>{this._initRequest(),this._initListeners(e,r,t),this._sendRequest(t)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){let t=this.xhr=new XMLHttpRequest;t.open("POST","https://api.imgur.com/3/image",!0),t.setRequestHeader("Authorization",`Client-ID ${this.clientID}`),t.responseType="json"}_initListeners(t,e,r){let o=this.xhr,n=this.loader,i=`Couldn't upload file: ${r.name}.`;o.addEventListener("error",()=>e(i)),o.addEventListener("abort",()=>e()),o.addEventListener("load",()=>{let r=o.response;if(!r||r.error)return e(r&&r.error?r.error.message:i);t({default:r.data.link})}),o.upload&&o.upload.addEventListener("progress",t=>{t.lengthComputable&&(n.uploadTotal=t.total,n.uploaded=t.loaded)})}_sendRequest(t){let e=new FormData;e.append("image",t),this.xhr.send(e)}}function r(t){t.plugins.get("FileRepository").createUploadAdapter=t=>new e(t,r.prototype.options)}t.exports=function(t){if(!t.clientID)throw Error("Imgur ClientID was not provided.");return r.prototype.options=t,r}}}]);