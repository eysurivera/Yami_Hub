"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9205],{9883:function(e,t,r){r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.314.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(62898).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},49205:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var a=r(57437),l=r(87009),i=r(54873),s=r(575),n=r(9883),c=r(53905),d=r(36815),o=r(22169),u=r(24033);let m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return[{id:"id",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"ID"})},accessorFn:e=>"".concat(e.id),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"max-w-xs",children:r.id})}},{id:"category_id",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Category"})},accessorFn:e=>"".concat(e.categoryId),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"max-w-xs",children:r.categoryId})}},{id:"title",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Title"})},accessorFn:e=>"".concat(e.title),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsxs)("div",{className:"min-w-[16rem]",children:[(0,a.jsx)("div",{className:"font-bold text-gray-800",children:r.title}),(0,a.jsx)("div",{className:"text-gray-500 max-w-md line-clamp-2",children:r.description})]})}},{id:"author",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Author"})},accessorFn:e=>"".concat(e.authorName),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"min-w-[10rem]",children:r.authorName})}},{id:"author_id",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Author ID"})},accessorFn:e=>"".concat(e.authorId),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"min-w-[10rem]",children:r.authorId})}},{id:"editor_id",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Editor ID"})},accessorFn:e=>"".concat(e.editorId),cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"min-w-[10rem]",children:r.editorId})}},{id:"status",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Status"})},cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,o.cn)("rounded-full w-2 h-2",r.status?"bg-green-500":"bg-red-500")}),(0,a.jsx)("div",{children:r.status?"True":"False"})]})},accessorFn:e=>"".concat(e.status?"True":"False"),filterFn:(e,t,r)=>r.includes(e.getValue(t))},{id:"created_at",header:e=>{let{column:t}=e;return(0,a.jsx)(d.p,{column:t,title:"Created At"})},cell:e=>{let{row:t}=e,r=t.original;return(0,a.jsx)("div",{className:"min-w-max",children:new Date(parseInt(r.createdAt)/1e6).toLocaleString("en-US",{timeZone:"Asia/Manila",year:"numeric",month:"short",day:"2-digit",hour:"numeric",minute:"numeric"})})},accessorFn:e=>"".concat(e.createdAt)},{id:"actions",header:r=>{let{column:l}=r;return(0,a.jsx)(h,{column:l,state:e,fn:t})},cell:r=>{let{row:l}=r;return(0,a.jsx)(x,{data:l.original,state:e,fn:t})}}]},h=e=>{let{column:t,state:r,fn:i}=e,[c]=(0,l.useStateContext)(),d=(0,u.useRouter)();return(0,a.jsx)("div",{className:"",children:(0,a.jsx)("div",{className:"flex justify-end gap-2",children:(0,a.jsxs)(s.z,{className:"h-8 px-2 lg:px-3",size:"sm",onClick:()=>{d.push("/admin/new-article")},disabled:!c.user.status,children:[(0,a.jsx)(n.Z,{className:"mr-2 h-4 w-4"}),"Add Article"]})})})},x=e=>{let{data:t,state:r,fn:i}=e,[n,d]=(0,l.useStateContext)(),o=(0,u.useRouter)();return(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,a.jsx)(s.z,{variant:"outline",size:"icon",onClick:()=>{d.setUpdateArticle(t),o.push("/admin/update-article/?id=".concat(t.id))},disabled:!n.user.status||t.authorId!==t.editorId,children:(0,a.jsx)(c.Z,{className:"h-4 w-4"})})})};var g=r(3216),j=r(7660),v=r(5887),p=r(33808),y=r(2265),w=r(73879);function f(e){var t;let{columns:r,data:l,metadata:i=null}=e,[s,n]=(0,y.useState)([]),[c,d]=(0,y.useState)([]),[o,u]=(0,y.useState)({}),m=(0,g.b7)({data:l,columns:r,getCoreRowModel:(0,j.sC)(),getPaginationRowModel:(0,j.G_)(),onSortingChange:n,getSortedRowModel:(0,j.tj)(),onColumnFiltersChange:d,getFilteredRowModel:(0,j.vL)(),onColumnVisibilityChange:u,getFacetedUniqueValues:(0,j.JG)(),state:{sorting:s,columnFilters:c,columnVisibility:o}});return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(w.n,{id:"categories",table:m}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(v.iA,{children:[(0,a.jsx)(v.xD,{children:m.getHeaderGroups().map(e=>(0,a.jsx)(v.SC,{children:e.headers.map(e=>(0,a.jsx)(v.ss,{children:e.isPlaceholder?null:(0,g.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)(v.RM,{children:(null===(t=m.getRowModel().rows)||void 0===t?void 0:t.length)?m.getRowModel().rows.map(e=>(0,a.jsx)(v.SC,{"data-state":e.getIsSelected()&&"selected",children:e.getVisibleCells().map(e=>(0,a.jsx)(v.pj,{children:(0,g.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)(v.SC,{children:(0,a.jsx)(v.pj,{colSpan:r.length,className:"h-24 text-center",children:"No results."})})})]})}),(0,a.jsx)(p.k,{table:m})]})}var b=r(28216);function A(){let[e,t]=(0,l.useStateContext)(),[r,s]=(0,b.Z)();return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-icp-yellow font-semibold text-[16px] pb-4",children:"Author"}),(0,a.jsxs)("div",{className:"md:flex",children:[(0,a.jsx)("ul",{className:"flex-column space-y space-y-4 text-sm font-medium text-gray-500 dark:text-gray-400 md:me-4 mb-4 md:mb-0",children:(0,a.jsx)("li",{children:(0,a.jsxs)("button",{className:r.currentTab===b.V.MY_ARTICLES?"inline-flex items-center px-4 py-3 text-white bg-blue-700 rounded-lg active w-full dark:bg-blue-600":"inline-flex items-center px-4 py-3 rounded-lg hover:text-gray-900 bg-gray-50 hover:bg-gray-100 w-full dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white",onClick:()=>s.setCurrentTab(b.V.MY_ARTICLES),children:[(0,a.jsx)(i.jYN,{className:"w-4 h-4 me-2 text-gray-500 dark:text-gray-400"}),(0,a.jsx)("div",{className:"min-w-max",children:"My Articles"})]})})}),r.currentTab===b.V.MY_ARTICLES&&(0,a.jsxs)("div",{className:"flex-1 overflow-hidden p-6 bg-gray-50 text-medium text-gray-500 dark:text-gray-400 dark:bg-gray-800 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:"My Articles"}),(0,a.jsx)(f,{columns:m(r,s),data:r.contents.articles})]})]})]})}},28216:function(e,t,r){r.d(t,{V:function(){return l},Z:function(){return d}});var a,l,i=r(2265),s=r(87009),n=r(77147),c=r(85240);function d(){let[e,t]=(0,s.useStateContext)(),[r,a]=(0,c.Z)("authorTab","my-articles"),[l,d]=(0,i.useState)({articles:[],categories:[]}),o=async t=>{try{switch(t){case"my-articles":{let t=await e.actor.getArticlesOfAuthor();d(e=>({...e,articles:t.Ok||[]}));break}case"categories":{let t=await e.actor.getAllCategories();d(e=>({...e,categories:t.Ok||[]}))}}}catch(e){console.error("Error while fetching ".concat(t,":"),e)}},u=async t=>{let{title:r,date:a,description:l,content:i,categoryId:s}=t;try{await e.actor.createArticle({id:"",title:r,date:a,description:l,content:i,categoryId:s,status:!1}),await o("my-articles"),(0,n.Am)({title:"Article created",description:"Article created successfully",duration:5e3})}catch(t){var c,d;let e=(null==t?void 0:null===(d=t.response)||void 0===d?void 0:null===(c=d.data)||void 0===c?void 0:c.message)||t.message;console.error("createArticle: ",e),(0,n.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:e})}},m=async t=>{let{id:r,title:a,date:l,description:i,content:s,categoryId:c}=t;try{let t=await e.actor.updateArticle({id:r,title:a,date:l,description:i,content:s,categoryId:c,status:!1});if(await o("my-articles"),t.Err){(0,n.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:t.Err.Forbidden});return}(0,n.Am)({title:"Article updated",description:"Article updated successfully",duration:5e3})}catch(t){var d,u;let e=(null==t?void 0:null===(u=t.response)||void 0===u?void 0:null===(d=u.data)||void 0===d?void 0:d.message)||t.message;console.error("updateArticle: ",e),(0,n.Am)({variant:"destructive",title:"Uh oh! Something went wrong.",description:e})}};return(0,i.useEffect)(()=>{e.isAuthor&&("my-articles"===r&&o("categories"),o(r))},[r,e.isAuthor]),[{currentTab:r,contents:l},{setCurrentTab:a,getData:o,createArticle:u,updateArticle:m}]}(a=l||(l={})).MY_ARTICLES="my-articles",a.CATEGORIES="categories"}}]);